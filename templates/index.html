<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th∆∞ Vi·ªán S√°ch Tr·∫ª Em</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header class="bg-warning text-dark text-center py-4">
        <h1 class="display-4">Th∆∞ Vi·ªán S√°ch Tr·∫ª Em</h1>
        <p class="lead">ƒê·ªçc s√°ch tranh vui nh·ªôn !</p>
    </header>

    <div class="container my-5">
        <!-- B·ªô l·ªçc theo th·ªÉ lo·∫°i -->
        <div class="mb-4 text-center">
            <label for="categoryFilter" class="form-label fw-bold">üìö Ch·ªçn th·ªÉ lo·∫°i:</label>
            <select id="categoryFilter" class="form-select w-auto d-inline-block">
                <option value="all">T·∫•t c·∫£</option>
                {% for cat in books | map(attribute='category') | unique %}
                <option value="{{ cat }}">{{ cat }}</option>
                {% endfor %}
            </select>
        </div>

        {% if books %}
            <p id="bookCount">ƒêang hi·ªÉn th·ªã {{ books|length }} s√°ch.</p>
            <div class="row" id="bookList">
                {% for book in books %}
                <div class="col-md-3 col-sm-6 mb-4 book-item" data-category="{{ book.category }}">
                    <div class="card h-100 shadow-sm">
                        <img src="{{ book.thumbnail }}" class="card-img-top" alt="{{ book.title }}">
                        <div class="card-body text-center">
                            <h5 class="card-title">{{ book.title }}</h5>
                            <p class="card-text text-muted">{{ book.category }}</p>
                            <a href="/book/{{ book.id }}" class="btn btn-success btn-lg">ƒê·ªçc S√°ch</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p>Kh√¥ng c√≥ s√°ch n√†o!</p>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const filter = document.getElementById("categoryFilter");
        const books = document.querySelectorAll(".book-item");
        const bookCount = document.getElementById("bookCount");

        filter.addEventListener("change", () => {
            const value = filter.value;
            let visibleCount = 0;

            books.forEach(book => {
                if (value === "all" || book.dataset.category === value) {
                    book.style.display = "block";
                    visibleCount++;
                } else {
                    book.style.display = "none";
                }
            });

            bookCount.textContent = `ƒêang hi·ªÉn th·ªã ${visibleCount} s√°ch.`;
        });
    </script>
</body>
</html>
